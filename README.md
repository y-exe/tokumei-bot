<div align="center">

# 匿名チャットBot

安全な匿名コミュニケーションをDiscordサーバーに実装するのを目的とした<br>
高度なフィルタリングと管理機能を備えた、プライバシー重視の匿名チャットBotです。

[![Discord.py](https://img.shields.io/badge/discord.py-v2.x-blue?style=for-the-badge&logo=discord&logoColor=white)](https://discordpy.readthedocs.io/en/latest/)
[![Python](https://img.shields.io/badge/Python-3.x-yellow?style=for-the-badge&logo=python&logoColor=white)](https://www.python.org/)
[![License](https://img.shields.io/badge/LICENSE-MIT-green.svg?style=for-the-badge)](LICENSE) 

</div>

## 概要

このBotは、Discordサーバー内に匿名掲示板のような機能を追加するためのBotです。
ユーザーは匿名でメッセージを投稿でき、投稿者は他のユーザーには分かりません。

サーバーの治安を維持するため、不適切なコンテンツに対する強力なフィルタリング機能や、コミュニティによる通報システム、そして管理者向けの豊富な管理ツールを備えています。

## 主要機能

*   **完全な匿名投稿:** Webhookを利用し、誰が投稿したか分からないメッセージングを実現します。
*   **メッセージの編集と削除:** 投稿者本人は、自分が投稿したメッセージを後から編集・削除できます。
*   **コミュニティ通報システム:** ユーザーは不適切なメッセージを簡単に通報できます。一定数の通報が集まると、自動的に管理者に通知されます。
*   **高度なコンテンツフィルタリング:**
    *   **NGワード/ドメイン:** 設定されたキーワードやURLリンクを含む投稿をブロックします。
    *   **画像検閲:** NSFW（不適切な画像）やグロテスクな画像をAIが検知し、投稿を防ぎます。
*   **豊富な管理者機能:** 投稿者の特定、利用制限（BAN）、フィルタリング強度の調整など、サーバー管理者が柔軟に運用できる機能を提供します。

## コマンドリスト

### ユーザー向けコマンド (メッセージを右クリック or 長押し)

*   `メッセージを編集`: 自分が投稿した匿名メッセージの内容を編集します。
*   `メッセージを削除`: 自分が投稿した匿名メッセージを削除します。
*   `匿名つぶやき通報`: 不適切だと思われる匿名メッセージを管理者に通報します。

### 管理者向けコマンド

*   `!setanonymous`: コマンドを実行したチャンネルを匿名チャット用に設定、または解除します。
*   `/id [メッセージID or URL]`: 指定された匿名メッセージの投稿者を特定します。
*   `/state [ユーザーID]`: 指定したユーザーのBAN状態を確認し、その場でBANまたはBAN解除を行えます。
*   `/border [カテゴリ] [アクション] [値]`: NSFW検知のしきい値や、ブロックするキーワード・URLを動的に設定・変更します。
*   `/log switch [ON/OFF]`: 現在のチャンネルのログ保存（通報機能の有効化）を切り替えます。
*   `/log channel [チャンネル]`: 通報ログを送信するチャンネルを指定します。
*   `!sync-t` (開発者向け): スラッシュコマンドをDiscordに同期します。

## 導入と初期設定

1.  **Botをサーバーに招待:**
    必要な権限（メッセージの送信、Webhookの管理など）を付与して、あなたのDiscordサーバーにBotを招待します。
2.  **チャンネルを設定:**
    匿名チャット用に使いたいテキストチャンネルで、`!setanonymous` コマンドを実行します。Botが自動的にWebhookを作成し、投稿用ボタンを設置します。
3.  **通報ログ用チャンネルを設定 (推奨):**
    管理者だけが見られるチャンネルを作成し、そこで `/log channel` コマンドを実行して、そのチャンネルを通報ログの送信先に指定します。

## 使用技術・ライブラリ

このBotは以下のライブラリやサービスを利用しています。

*   **Discord.py:** Botの基本的なフレームワーク
*   **Sightengine API:** NSFWおよびグロ画像の検知
*   **Playwright:** URL先のスクリーンショット撮影による画像解析
*   **Aiohttp:** 非同期HTTPリクエスト
*   **Python-dotenv:** 環境変数の管理

---

© 2025 yexe
